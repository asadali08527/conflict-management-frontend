# =============================================================================
# CONFLICT MANAGEMENT BACKEND - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env file to version control

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=5000

# -----------------------------------------------------------------------------
# Database Configuration (P1: Enhanced with connection pooling settings)
# -----------------------------------------------------------------------------
MONGODB_URI=mongodb://localhost:27017/conflict-management
DB_MAX_POOL=50
DB_MIN_POOL=5

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRE=7d

# -----------------------------------------------------------------------------
# CORS Configuration (P0: Allowlist-based security)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins (NO SPACES)
CORS_ALLOWLIST=https://resolveit.eliff.tech,https://app.example.com,http://localhost:3000

# Legacy variable (deprecated, use CORS_ALLOWLIST instead)
# ALLOWED_ORIGINS=https://resolveit.eliff.tech

# -----------------------------------------------------------------------------
# AWS S3 Configuration (P0: Aligned with AWS standard naming)
# -----------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_S3_BUCKET=your-s3-bucket-name
AWS_REGION=us-east-1

# Legacy variables (deprecated but still supported for backward compatibility)
# AWS_ACCESS_KEY=your-aws-access-key-id
# AWS_S3_BUCKET_NAME=your-s3-bucket-name

# -----------------------------------------------------------------------------
# Redis Configuration (P1: Distributed rate limiting & caching)
# -----------------------------------------------------------------------------
# Optional: Leave empty to use in-memory rate limiting (not recommended for production)
# Format: redis://[username]:[password]@[host]:[port]/[database]
REDIS_URL=redis://localhost:6379
# Example with authentication: redis://:password@localhost:6379
# Example with AWS ElastiCache: redis://your-cluster.cache.amazonaws.com:6379

# -----------------------------------------------------------------------------
# Google OAuth (if using social login)
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:5000/api/auth/google/callback

# -----------------------------------------------------------------------------
# Email Configuration (if implementing email notifications)
# -----------------------------------------------------------------------------
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# EMAIL_FROM=noreply@resolveit.com

# -----------------------------------------------------------------------------
# File Upload Configuration
# -----------------------------------------------------------------------------
MAX_FILE_SIZE=10485760
# Max file size in bytes (default: 10MB)

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=info
# Options: error, warn, info, debug, trace

# -----------------------------------------------------------------------------
# Production Deployment Notes
# -----------------------------------------------------------------------------
# 1. Set NODE_ENV=production
# 2. Use strong, unique JWT_SECRET (min 32 characters)
# 3. Configure CORS_ALLOWLIST with your production domains only
# 4. Set up Redis for distributed rate limiting (REDIS_URL)
# 5. Configure AWS S3 with IAM role or secure credentials
# 6. Use MongoDB replica set connection string for high availability
# 7. Set appropriate DB_MAX_POOL based on your traffic (50-100 for production)
# 8. Enable SSL/TLS for all external connections
# 9. Set up monitoring and alerting for /api/readyz endpoint
# 10. Rotate credentials regularly and use secrets management service

# -----------------------------------------------------------------------------
# Security Checklist
# -----------------------------------------------------------------------------
# ✓ Never commit .env file to git
# ✓ Use different credentials for dev/staging/production
# ✓ Restrict AWS IAM permissions to minimum required
# ✓ Enable MongoDB authentication and use strong passwords
# ✓ Use Redis AUTH if Redis is exposed to network
# ✓ Keep dependencies updated (npm audit)
# ✓ Enable rate limiting in production (requires REDIS_URL)
# ✓ Set up firewall rules to restrict database access
# ✓ Use environment-specific S3 buckets
# ✓ Enable S3 bucket versioning and encryption at rest
